<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hmrz.mybatis.brand">
    
	<select id="getBrandList" parameterType="BrandSearch" resultType="BrandBean">
        SELECT
        	SB.brand_id,
			SB.brand_name,
			SB.create_user,
			SB.create_time,
			SB.is_del
        FROM 
        	S_BRAND SB
        WHERE
            SB.is_del = 0
            <if test="brand_name_search != null and brand_name_search != ''">
                AND SB.brand_name LIKE CONCAT('%',#{brand_name_search},'%')
            </if>
        ORDER BY SB.brand_id desc
        <if test="havePage == 1">
        LIMIT #{start} , #{rows}
        </if>
	</select>
	
	<select id="getBrandCount" parameterType="BrandSearch" resultType="int">
        SELECT
        	count(SB.brand_id)
        FROM 
        	S_BRAND SB
        WHERE
            SB.is_del = 0
        <if test="brand_name_search != null and brand_name_search != ''">
            AND SB.brand_name LIKE CONCAT('%',#{brand_name_search},'%')
        </if>
	</select>
	
	<select id="getBrand" parameterType="BrandSearch" resultType="BrandBean">
        SELECT
        	SB.brand_id,
			SB.brand_name,
			SB.create_user,
			SB.create_time,
			SB.is_del
        FROM 
        	S_BRAND SB
        WHERE
            SB.is_del = 0
        <if test="brand_name_search != null and brand_name_search != ''">
            AND SB.brand_name = #{brand_name_search}
        </if>
        <if test="brand_id_search != null and brand_id_search != ''">
            AND SB.brand_id = #{brand_id_search}
        </if>
	</select>
	
	<select id="getBrandAll" resultType="BrandBean">
        SELECT
        	SB.brand_id,
			SB.brand_name
        FROM 
        	S_BRAND SB
        WHERE
            SB.is_del = 0
        ORDER BY SB.brand_id desc
	</select>
    
    <insert id="addBrand" parameterType="BrandBean" useGeneratedKeys="true" keyProperty="brand_id">
        INSERT INTO S_BRAND (
			brand_name,
			create_user
        )
        VALUES 
        (#{brand_name,jdbcType=VARCHAR},
         #{create_user,jdbcType=VARCHAR}
         )
    </insert>
    
    <update id="modifyBrand" parameterType="BrandBean">
        UPDATE S_BRAND
        <set>
            <if test="brand_name != null and brand_name != ''">
                brand_name = #{brand_name,jdbcType=VARCHAR}
            </if>
        </set>
        WHERE brand_id = #{brand_id} 
    </update>
    
    
    <update id="delBrand" parameterType="java.util.Map">
		UPDATE S_BRAND set is_del = 1	
		WHERE brand_id in
		<foreach collection="id" item="item"  separator="," open="(" close=")">
		(#{item,jdbcType=VARCHAR})
        </foreach>
	</update>
</mapper>